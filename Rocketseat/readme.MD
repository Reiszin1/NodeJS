# ğŸ¥ API de Gerenciamento de VÃ­deos

API REST desenvolvida com Node.js, Fastify e PostgreSQL para gerenciar uma coleÃ§Ã£o de vÃ­deos.

## ğŸš€ Tecnologias

- **Node.js** - Runtime JavaScript
- **Fastify** - Framework web minimalista e performÃ¡tico
- **PostgreSQL** - Banco de dados relacional
- **postgres** - Driver PostgreSQL nativo para Node.js
- **dotenv** - Gerenciamento de variÃ¡veis de ambiente

## ğŸ“‹ Funcionalidades

- âœ… Criar novos vÃ­deos
- âœ… Listar todos os vÃ­deos
- âœ… Buscar vÃ­deos por tÃ­tulo
- âœ… Atualizar informaÃ§Ãµes de um vÃ­deo
- âœ… Deletar vÃ­deos

## ğŸ› ï¸ InstalaÃ§Ã£o

### PrÃ©-requisitos

- Node.js (versÃ£o 18 ou superior)
- PostgreSQL instalado localmente ou acesso a um servidor PostgreSQL
- PgAdmin (opcional, para gerenciar o banco de dados)

### Passos

1. Clone o repositÃ³rio:
```bash
git clone <url-do-repositorio>
cd Rocketseat
```

2. Instale as dependÃªncias:
```bash
npm install
```

3. Configure as variÃ¡veis de ambiente:

Crie um arquivo `.env` na raiz do projeto:
```env
PGHOST=localhost
PGUSER=postgres
PGPASSWORD=sua_senha
PGDATABASE=rocketseat
PORT=3333
```

4. Crie o banco de dados:

No **PgAdmin**, crie um novo database chamado `rocketseat`.

5. Crie a tabela de vÃ­deos:
```bash
node create-table.js
```

6. Inicie o servidor:
```bash
# Modo desenvolvimento (com auto-reload)
npm run dev

# Modo produÃ§Ã£o
npm start
```

O servidor estarÃ¡ rodando em `http://localhost:3333`

## ğŸ“¡ Endpoints da API

### Criar VÃ­deo
```http
POST /videos
Content-Type: application/json

{
  "title": "TÃ­tulo do vÃ­deo",
  "description": "DescriÃ§Ã£o do vÃ­deo",
  "duration": 180
}
```

**Resposta:** `201 Created`

### Listar VÃ­deos
```http
GET /videos
```

**Resposta:** `200 OK`
```json
[
  {
    "id": "uuid",
    "title": "TÃ­tulo do vÃ­deo",
    "description": "DescriÃ§Ã£o do vÃ­deo",
    "duration": 180
  }
]
```

### Buscar VÃ­deos
```http
GET /videos?search=node
```

**Resposta:** `200 OK` - Retorna vÃ­deos que contenham "node" no tÃ­tulo

### Atualizar VÃ­deo
```http
PUT /videos/:id
Content-Type: application/json

{
  "title": "Novo tÃ­tulo",
  "description": "Nova descriÃ§Ã£o",
  "duration": 200
}
```

**Resposta:** `204 No Content`

### Deletar VÃ­deo
```http
DELETE /videos/:id
```

**Resposta:** `204 No Content`

## ğŸ“ Estrutura do Projeto

```
Rocketseat/
â”œâ”€â”€ server.js              # Servidor Fastify com rotas
â”œâ”€â”€ db.js                  # ConfiguraÃ§Ã£o da conexÃ£o PostgreSQL
â”œâ”€â”€ database-postgres.js   # Classe com operaÃ§Ãµes do banco
â”œâ”€â”€ database-memory.js     # ImplementaÃ§Ã£o em memÃ³ria (dev)
â”œâ”€â”€ create-table.js        # Script para criar tabela
â”œâ”€â”€ routes.http            # Exemplos de requisiÃ§Ãµes (REST Client)
â”œâ”€â”€ .env                   # VariÃ¡veis de ambiente (nÃ£o versionado)
â”œâ”€â”€ .gitignore             # Arquivos ignorados pelo Git
â”œâ”€â”€ package.json           # DependÃªncias e scripts
â””â”€â”€ readme.MD              # Este arquivo
```

## ğŸ§ª Testando a API

Use o arquivo `routes.http` com a extensÃ£o **REST Client** do VS Code, ou use ferramentas como:

- **Postman**
- **Insomnia**
- **Thunder Client**
- **cURL**

### Exemplo com cURL

```bash
# Criar vÃ­deo
curl -X POST http://localhost:3333/videos \
  -H "Content-Type: application/json" \
  -d '{"title":"Meu VÃ­deo","description":"DescriÃ§Ã£o","duration":120}'

# Listar vÃ­deos
curl http://localhost:3333/videos

# Buscar vÃ­deos
curl http://localhost:3333/videos?search=node
```

## ğŸ—„ï¸ Estrutura do Banco de Dados

### Tabela `videos`

| Coluna      | Tipo    | DescriÃ§Ã£o                    |
|-------------|---------|------------------------------|
| id          | TEXT    | UUID gerado automaticamente  |
| title       | TEXT    | TÃ­tulo do vÃ­deo             |
| description | TEXT    | DescriÃ§Ã£o do vÃ­deo          |
| duration    | INTEGER | DuraÃ§Ã£o em segundos         |

## ğŸ”§ Scripts DisponÃ­veis

```bash
npm start       # Inicia o servidor
npm run dev     # Inicia com hot-reload
```

## ğŸŒ Deploy

Para fazer deploy em produÃ§Ã£o (ex: Render, Railway):

1. Configure o `PORT` como variÃ¡vel de ambiente na plataforma
2. Configure as variÃ¡veis do PostgreSQL (`PGHOST`, `PGUSER`, `PGPASSWORD`, `PGDATABASE`)
3. Execute `node create-table.js` apÃ³s o primeiro deploy
4. O servidor jÃ¡ estÃ¡ configurado para aceitar conexÃµes externas (`host: '0.0.0.0'`)

## ğŸ“ LicenÃ§a

ISC

## ğŸ‘¨â€ğŸ’» Autor

Desenvolvido durante o curso da **Rocketseat**

